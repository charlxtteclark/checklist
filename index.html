<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PS Hummingbird Onboarding</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #FF5757;
            --primary-dark: #E64545;
            --secondary: #FF8B8B;
            --accent: #FFB3B3;
            --dark: #2D2D2D;
            --background: #f8f9fc;
            --surface: #ffffff;
            --text: #1a202c;
            --text-light: #718096;
            --border: #e2e8f0;
            --success: #48bb78;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
            --shadow-lg: 0 20px 40px rgba(255, 87, 87, 0.15);
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--background);
            color: var(--text);
            line-height: 1.6;
        }

        .auth-screen {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--primary) 0%, var(--dark) 100%);
            padding: 20px;
        }

        .auth-card {
            background: var(--surface);
            border-radius: 16px;
            padding: 48px;
            max-width: 460px;
            width: 100%;
            box-shadow: var(--shadow-lg);
        }

        .logo-section {
            text-align: center;
            margin-bottom: 40px;
        }

        .logo-section h1 {
            font-size: 28px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 8px;
        }

        .logo-section p {
            color: var(--text-light);
            font-size: 14px;
        }

        .form-group {
            margin-bottom: 24px;
        }

        label {
            display: block;
            font-weight: 500;
            margin-bottom: 8px;
            font-size: 14px;
            color: var(--text);
        }

        input[type="email"],
        input[type="text"],
        input[type="password"] {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 15px;
            font-family: inherit;
            transition: all 0.2s;
        }

        input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(255, 87, 87, 0.1);
        }

        .btn {
            width: 100%;
            padding: 14px 24px;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            font-family: inherit;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
            box-shadow: var(--shadow-lg);
        }

        .btn-secondary {
            background: var(--background);
            color: var(--text);
            border: 2px solid var(--border);
        }

        .btn-secondary:hover {
            border-color: var(--primary);
            background: white;
        }

        .divider {
            text-align: center;
            margin: 24px 0;
            position: relative;
        }

        .divider::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            width: 100%;
            height: 1px;
            background: var(--border);
        }

        .divider span {
            background: var(--surface);
            padding: 0 16px;
            position: relative;
            color: var(--text-light);
            font-size: 13px;
        }

        .error-message {
            color: #e53e3e;
            font-size: 14px;
            margin-top: 8px;
        }

        .success-message {
            color: var(--success);
            font-size: 14px;
            margin-top: 8px;
        }

        .app-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: var(--dark);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 16px 32px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--shadow);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .header-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--primary);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .user-email {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.7);
        }

        .btn-logout {
            padding: 8px 16px;
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
            color: white;
        }

        .btn-logout:hover {
            border-color: var(--primary);
            background: var(--primary);
        }

        .main-content {
            flex: 1;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
            padding: 40px 32px;
        }

        .tabs {
            display: flex;
            gap: 8px;
            border-bottom: 2px solid var(--border);
            margin-bottom: 32px;
            overflow-x: auto;
            padding-bottom: 0;
        }

        .tab {
            padding: 12px 24px;
            background: none;
            border: none;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            color: var(--text-light);
            border-bottom: 3px solid transparent;
            margin-bottom: -2px;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .tab:hover {
            color: var(--text);
        }

        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .welcome-banner {
            background: linear-gradient(135deg, var(--primary) 0%, var(--dark) 100%);
            color: white;
            padding: 48px;
            border-radius: 16px;
            margin-bottom: 40px;
            box-shadow: var(--shadow-lg);
        }

        .welcome-banner h2 {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 16px;
        }

        .welcome-banner p {
            font-size: 16px;
            line-height: 1.7;
            opacity: 0.95;
        }

        .principles-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 24px;
            margin-top: 32px;
        }

        .principle-card {
            background: var(--surface);
            padding: 24px;
            border-radius: 12px;
            border: 2px solid var(--border);
            transition: all 0.2s;
        }

        .principle-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .principle-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            background: var(--primary);
            color: white;
            border-radius: 8px;
            font-weight: 700;
            font-size: 14px;
            margin-bottom: 12px;
        }

        .principle-card h3 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text);
        }

        .principle-card p {
            color: var(--text-light);
            font-size: 14px;
            line-height: 1.6;
        }

        .week-section {
            margin-bottom: 32px;
        }

        .week-header {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px 20px;
            background: var(--primary);
            color: white;
            border-radius: 12px 12px 0 0;
            font-weight: 600;
            font-size: 16px;
        }

        .task-list {
            background: var(--surface);
            border: 2px solid var(--border);
            border-radius: 0 0 12px 12px;
            border-top: none;
        }

        .task-item {
            padding: 20px 24px;
            border-bottom: 1px solid var(--border);
            display: flex;
            gap: 16px;
            align-items: flex-start;
            transition: background 0.2s;
        }

        .task-item:last-child {
            border-bottom: none;
        }

        .task-item:hover {
            background: var(--background);
        }

        .checkbox-wrapper {
            flex-shrink: 0;
            padding-top: 2px;
        }

        .checkbox {
            width: 24px;
            height: 24px;
            cursor: pointer;
            accent-color: var(--primary);
        }

        .task-content {
            flex: 1;
        }

        .task-title {
            font-size: 15px;
            font-weight: 500;
            color: var(--text);
            margin-bottom: 8px;
        }

        .task-completed .task-title {
            text-decoration: line-through;
            color: var(--text-light);
        }

        .task-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            font-size: 13px;
            color: var(--text-light);
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .meta-label {
            font-weight: 600;
        }

        .progress-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: var(--surface);
            padding: 24px;
            border-radius: 12px;
            border: 2px solid var(--border);
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--primary);
        }

        .stat-label {
            color: var(--text-light);
            font-size: 14px;
            margin-top: 4px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--border);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 12px;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary);
            transition: width 0.3s ease;
        }

        .manager-grid {
            display: grid;
            gap: 24px;
        }

        .employee-card {
            background: var(--surface);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 24px;
            transition: all 0.2s;
        }

        .employee-card:hover {
            border-color: var(--primary);
            box-shadow: var(--shadow);
        }

        .employee-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .employee-name {
            font-size: 18px;
            font-weight: 600;
            color: var(--text);
        }

        .employee-role {
            color: var(--text-light);
            font-size: 14px;
        }

        .change-password-section {
            background: var(--surface);
            padding: 32px;
            border-radius: 12px;
            border: 2px solid var(--border);
            max-width: 500px;
            margin: 32px 0;
        }


        .overview-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }

        .overview-card {
            background: var(--surface);
            padding: 28px;
            border-radius: 12px;
            border: 2px solid var(--border);
            text-align: center;
        }

        .overview-number {
            font-size: 48px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 8px;
        }

        .overview-label {
            font-size: 14px;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .employee-detail-card {
            background: var(--surface);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 24px;
            transition: all 0.2s;
        }

        .employee-detail-card:hover {
            border-color: var(--primary);
            box-shadow: var(--shadow);
        }

        .employee-detail-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 2px solid var(--border);
        }

        .employee-info h3 {
            font-size: 20px;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 4px;
        }

        .employee-status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-on-track {
            background: #D1FAE5;
            color: #065F46;
        }

        .status-behind {
            background: #FEE2E2;
            color: #991B1B;
        }

        .status-just-started {
            background: #DBEAFE;
            color: #1E40AF;
        }

        .role-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }

        .role-stat {
            padding: 16px;
            background: var(--background);
            border-radius: 8px;
            border-left: 4px solid var(--primary);
        }

        .role-stat-name {
            font-size: 13px;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 8px;
        }

        .role-stat-progress {
            font-size: 18px;
            font-weight: 700;
            color: var(--primary);
        }

        .role-stat-label {
            font-size: 12px;
            color: var(--text-light);
        }

        .hidden {
            display: none !important;
        }

        @media (max-width: 768px) {
            .header {
                padding: 16px;
                flex-direction: column;
                gap: 16px;
            }

            .main-content {
                padding: 24px 16px;
            }

            .welcome-banner {
                padding: 32px 24px;
            }

            .welcome-banner h2 {
                font-size: 24px;
            }

            .principles-grid {
                grid-template-columns: 1fr;
            }

            .tabs {
                gap: 4px;
            }

            .tab {
                padding: 12px 16px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div id="authScreen" class="auth-screen">
        <div class="auth-card">
            <div class="logo-section">
                <h1>PS Hummingbird</h1>
                <p>Onboarding Portal</p>
            </div>

            <div id="loginForm">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" placeholder="Enter your username" autocomplete="username">
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" placeholder="Enter your password" autocomplete="current-password">
                    <div id="loginError" class="error-message hidden"></div>
                </div>
                <button class="btn btn-primary" onclick="login(event)">Login</button>

            </div>
        </div>
    </div>

    <div id="appContainer" class="app-container hidden">
        <header class="header">
            <div class="header-left">
                <div class="header-title">PS Hummingbird Onboarding</div>
            </div>
            <div class="user-info">
                <span class="user-email" id="userEmail"></span>
                <button class="btn-logout" onclick="logout()">Logout</button>
            </div>
        </header>

        <main class="main-content">
            <div class="tabs" id="tabs">
                <button class="tab active" onclick="switchTab('welcome', event)">Welcome</button>
                <button class="tab" onclick="switchTab('architect', event)">Architect</button>
                <button class="tab" onclick="switchTab('consultant', event)">Consultant</button>
                <button class="tab" onclick="switchTab('consulting-director', event)">Consulting Director</button>
                <button class="tab" onclick="switchTab('growth-sales', event)">Growth/Sales</button>
                <button class="tab" onclick="switchTab('enablement', event)">Enablement</button>
                <button class="tab hidden" id="managerTab" onclick="switchTab('manager', event)">Manager Dashboard</button>
            </div>

            <div id="welcome" class="tab-content active">
                <div class="welcome-banner">
                    <h2>Welcome to PS Hummingbird!</h2>
                    <p>We're thrilled to have you join our team. This onboarding checklist will guide you through your first 90 days at Hummingbird.</p>
                    <p style="margin-top: 16px;"><strong>Our Mission:</strong> Hummingbird exists to empower our customers to do more with AI, powered by Microsoft Business Applications.</p>
                </div>

                <h3 style="font-size: 24px; margin-bottom: 24px; color: var(--text);">OUR 7 GUIDING PRINCIPLES</h3>
                <div class="principles-grid">
                    <div class="principle-card">
                        <div class="principle-number">1</div>
                        <h3>Be the best team to win the deal</h3>
                        <p>Stay close to our customer, deliver with empathy, speed, and sharp understanding of our clients' world</p>
                    </div>
                    <div class="principle-card">
                        <div class="principle-number">2</div>
                        <h3>Have a growth mindset</h3>
                        <p>Always be learning, improving, and evolving</p>
                    </div>
                    <div class="principle-card">
                        <div class="principle-number">3</div>
                        <h3>Have a bias for action</h3>
                        <p>Speed wins. Progress > Perfection. Move quickly and learn by doing</p>
                    </div>
                    <div class="principle-card">
                        <div class="principle-number">4</div>
                        <h3>We believe in full contact</h3>
                        <p>Be engaged, be present, be all-in</p>
                    </div>
                    <div class="principle-card">
                        <div class="principle-number">5</div>
                        <h3>We are hands-on - Grab a mop</h3>
                        <p>No task is beneath anyone. We all pitch in to get the job done</p>
                    </div>
                    <div class="principle-card">
                        <div class="principle-number">6</div>
                        <h3>We are focused on our knitting</h3>
                        <p>Focus on the mission - don't chase shiny objects. Double down on what we do best and deepen our craft</p>
                    </div>
                    <div class="principle-card">
                        <div class="principle-number">7</div>
                        <h3>We have an opinion and we innovate</h3>
                        <p>Lead with a point of view. Challenge the status quo. Take a simple form, lean approach</p>
                    </div>
                </div>
            </div>

            <div id="architect" class="tab-content"></div>
            <div id="consultant" class="tab-content"></div>
            <div id="consulting-director" class="tab-content"></div>
            <div id="growth-sales" class="tab-content"></div>
            <div id="enablement" class="tab-content"></div>

            <div id="manager" class="tab-content">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px;">
                    <h2 style="font-size: 28px; margin: 0;">Manager Dashboard</h2>
                    <button class="btn-secondary" style="width: auto; padding: 10px 20px;" onclick="togglePasswordSection()">Change Password</button>
                </div>

                <div id="passwordSection" class="change-password-section hidden">
                    <h3 style="font-size: 18px; margin-bottom: 16px;">Change Manager Password</h3>
                    <div class="form-group">
                        <label for="newPassword">New Password</label>
                        <input type="password" id="newPassword" placeholder="Enter new password">
                    </div>
                    <div class="form-group">
                        <label for="confirmPassword">Confirm Password</label>
                        <input type="password" id="confirmPassword" placeholder="Confirm new password">
                    </div>
                    <div id="passwordChangeError" class="error-message hidden"></div>
                    <div id="passwordChangeSuccess" class="success-message hidden"></div>
                    <button class="btn btn-primary" onclick="changeManagerPassword()">Update Password</button>
                </div>

                <div id="managerOverview" class="overview-stats"></div>
                <div id="managerDashboard" class="manager-grid"></div>
            </div>
        </main>
    </div>

    <script>
const ROLES_DATA = {
    "architect": [
        {
            "week": "Week 1",
            "task": "Complete HR onboarding paperwork and IT setup",
            "connectWith": "People Ops",
            "notes": "Laptop, email, systems access"
        },
        {
            "week": "Week 1",
            "task": "Review 2026 Annual Kickoff deck",
            "connectWith": "Your Manager",
            "notes": "Understand company strategy, goals, and structure"
        },
        {
            "week": "Week 1",
            "task": "Meet your manager for 1:1 kick-off",
            "connectWith": "Your Manager",
            "notes": "Discuss role expectations, 90-day goals"
        },
        {
            "week": "Week 1",
            "task": "Shadow a customer discovery call",
            "connectWith": "SVP Customer Experience",
            "notes": "See how we engage with customers"
        },
        {
            "week": "Week 1",
            "task": "Review Hummingbird guiding principles",
            "connectWith": "Self",
            "notes": "Internalize our 7 core principles"
        },
        {
            "week": "Week 1",
            "task": "Introduction to Microsoft partnership",
            "connectWith": "Growth Team",
            "notes": "Understand our Microsoft relationship"
        },
        {
            "week": "Week 2",
            "task": "Deep dive on Nectarworks platform",
            "connectWith": "Technical Lead",
            "notes": "Our AI differentiator - understand capabilities"
        },
        {
            "week": "Week 2",
            "task": "Review D365, Power Platform, Fabric architecture",
            "connectWith": "Senior Architect",
            "notes": "Cross-stack mastery session"
        },
        {
            "week": "Week 2",
            "task": "Get access to ______ ?",
            "connectWith": "Enablement",
            "notes": "Our core delivery tools - adoption required"
        },
        {
            "week": "Week 2",
            "task": "Review 3 recent solution architecture docs",
            "connectWith": "Your Manager",
            "notes": "Learn our documentation standards"
        },
        {
            "week": "Week 2",
            "task": "Attend a solution visioning session with SVP",
            "connectWith": "SVP Customer Experience",
            "notes": "See how we scope and vision solutions"
        },
        {
            "week": "Week 2",
            "task": "Meet with Consulting Director",
            "connectWith": "Regional CD",
            "notes": "Understand delivery execution and how you'll collaborate"
        },
        {
            "week": "Week 3",
            "task": "Join active project as observer",
            "connectWith": "Project CD",
            "notes": "Shadow delivery team to learn our methodology"
        },
        {
            "week": "Week 3",
            "task": "Participate in technical discovery for new opportunity",
            "connectWith": "Sales/SVP",
            "notes": "Practice our discovery approach"
        },
        {
            "week": "Week 4",
            "task": "Lead a technical deep dive with customer",
            "connectWith": "Your Manager",
            "notes": "Manager shadows you - get feedback"
        },
        {
            "week": "Week 4",
            "task": "Contribute to solution architecture document",
            "connectWith": "Senior Architect",
            "notes": "Start producing our standard outputs"
        },
        {
            "week": "Week 4",
            "task": "Present solution design to internal team",
            "connectWith": "Cross-functional",
            "notes": "Practice presenting with Hummingbird style"
        },
        {
            "week": "Month 2",
            "task": "Own end-to-end solution architecture for opportunity",
            "connectWith": "SVP/Growth",
            "notes": "Full ownership with support"
        },
        {
            "week": "Month 2",
            "task": "Lead technical workshops with customer (may be sooner)",
            "connectWith": "Your Manager",
            "notes": "Demonstrate technical authority"
        },
        {
            "week": "Month 2",
            "task": "Contribute to SOW/proposal for new engagement",
            "connectWith": "Growth Team",
            "notes": "Learn our commercial process"
        },
        {
            "week": "Month 2",
            "task": "Monthly CEO touchpoint #1",
            "connectWith": "CEO",
            "notes": "Scheduled by People Ops"
        },
        {
            "week": "Month 2",
            "task": "Mentor junior architect or consultant",
            "connectWith": "Your Manager",
            "notes": "Start giving back to the team"
        },
        {
            "week": "Month 2",
            "task": "Review Microsoft partner requirements and certifications",
            "connectWith": "Enablement",
            "notes": "Ensure you're on track for required certs"
        },
        {
            "week": "Month 3",
            "task": "Lead solution design independently",
            "connectWith": "Self",
            "notes": "Minimal oversight - demonstrate mastery"
        },
        {
            "week": "Month 3",
            "task": "Present at internal knowledge share",
            "connectWith": "All Hands",
            "notes": "Share a capability, pattern, or lesson learned"
        },
        {
            "week": "Month 3",
            "task": "Participate in interviewing candidates",
            "connectWith": "Your Manager",
            "notes": "Help us hire great talent"
        },
        {
            "week": "Month 3",
            "task": "90-day review with manager (is this feasible)?",
            "connectWith": "Your Manager",
            "notes": "Reflect on progress, set goals for next 90 days"
        },
        {
            "week": "Month 3",
            "task": "Contribute to AI/innovation initiative",
            "connectWith": "Innovation Team",
            "notes": "Push our technical boundaries"
        }
    ],
    "consultant": [
        {
            "week": "Week 1",
            "task": "Complete HR onboarding and IT setup",
            "connectWith": "People Ops",
            "notes": "Laptop, email, systems access"
        },
        {
            "week": "Week 1",
            "task": "Review 2026 Annual Kickoff deck in detail",
            "connectWith": "Your Manager",
            "notes": "Focus on Regional Mgmt function and margin goals"
        },
        {
            "week": "Week 1",
            "task": "Meet your manager for role expectations",
            "connectWith": "Your Manager",
            "notes": "Discuss P&L ownership, utilization targets"
        },
        {
            "week": "Week 1",
            "task": "Review current regional P&L and utilization",
            "connectWith": "Your Manager / Finance",
            "notes": "Understand your starting baseline"
        },
        {
            "week": "Week 1",
            "task": "Internalize Hummingbird's 7 guiding principles",
            "connectWith": "Self",
            "notes": "These drive how we operate"
        },
        {
            "week": "Week 1",
            "task": "Meet your direct reports (if applicable)",
            "connectWith": "Your Team",
            "notes": "Build relationships, understand current projects"
        },
        {
            "week": "Week 2",
            "task": "Shadow 2-3 active project standup/status calls",
            "connectWith": "Project Teams",
            "notes": "Learn our delivery cadence and communication"
        },
        {
            "week": "Week 2",
            "task": "Get access to ____? (Dock, Gyde?)",
            "connectWith": "Enablement",
            "notes": "Our delivery tools - adoption is mandatory"
        },
        {
            "week": "Month 2",
            "task": "Monthly CEO touchpoint #1",
            "connectWith": "CEO",
            "notes": "Scheduled by People Ops"
        },
        {
            "week": "Month 3",
            "task": "Own end-to-end delivery of your workstream on a project",
            "connectWith": "Self",
            "notes": "Demonstrate full capability independently"
        }
    ],
    "consulting-director": [
        {
            "week": "Week 1",
            "task": "Complete HR onboarding and IT setup",
            "connectWith": "People Ops",
            "notes": "Laptop, email, systems access"
        },
        {
            "week": "Week 1",
            "task": "Review 2026 Annual Kickoff deck in detail",
            "connectWith": "Your Manager",
            "notes": "Focus on Regional Mgmt function and margin goals"
        },
        {
            "week": "Week 1",
            "task": "Meet your manager for role expectations",
            "connectWith": "Your Manager",
            "notes": "Discuss P&L ownership, utilization targets"
        },
        {
            "week": "Week 1",
            "task": "Review current regional P&L and utilization",
            "connectWith": "Your Manager / Finance",
            "notes": "Understand your starting baseline"
        },
        {
            "week": "Week 1",
            "task": "Internalize Hummingbird's 7 guiding principles",
            "connectWith": "Self",
            "notes": "These drive how we operate"
        },
        {
            "week": "Week 1",
            "task": "Meet your direct reports (if applicable)",
            "connectWith": "Your Team",
            "notes": "Build relationships, understand current projects"
        },
        {
            "week": "Week 2",
            "task": "Shadow 2-3 active project standup/status calls",
            "connectWith": "Project Teams",
            "notes": "Learn our delivery cadence and communication"
        },
        {
            "week": "Week 2",
            "task": "Get access to ____? (Dock, Gyde?)",
            "connectWith": "Enablement",
            "notes": "Our delivery tools - adoption is mandatory"
        },
        {
            "week": "Week 2",
            "task": "Review project scoping and SOW process",
            "connectWith": "Growth / Senior CD",
            "notes": "Understand how deals transition to delivery"
        },
        {
            "week": "Week 2",
            "task": "Learn forecasting and capacity planning tools",
            "connectWith": "Enablement / Finance",
            "notes": "Critical for utilization management"
        },
        {
            "week": "Week 2",
            "task": "Meet with SVP Customer Experience",
            "connectWith": "SVP",
            "notes": "Understand how you support their customer outcomes"
        },
        {
            "week": "Week 2",
            "task": "Review margin targets and cost structure",
            "connectWith": "Finance",
            "notes": "75 cents to earn $1 is the goal"
        },
        {
            "week": "Week 3",
            "task": "Participate in project scoping discussion",
            "connectWith": "Growth / Architect",
            "notes": "Learn how we scope and estimate"
        },
        {
            "week": "Week 3",
            "task": "Review resource allocation and bench strategy",
            "connectWith": "Your Manager",
            "notes": "Understand hiring priorities"
        },
        {
            "week": "Week 4",
            "task": "Lead project status meeting",
            "connectWith": "Project Team",
            "notes": "Take ownership of delivery cadence"
        },
        {
            "week": "Week 4",
            "task": "Conduct 1:1s with all team members",
            "connectWith": "Your Team",
            "notes": "Build trust, understand motivations and concerns"
        },
        {
            "week": "Week 4",
            "task": "Attend executive steering committee call",
            "connectWith": "SVP / Customer",
            "notes": "See how we manage executive relationships"
        },
        {
            "week": "Week 4",
            "task": "Review risk escalation process",
            "connectWith": "Your Manager",
            "notes": "Know when and how to escalate issues"
        },
        {
            "week": "Month 2",
            "task": "Own regional P&L reporting and forecasting",
            "connectWith": "Finance",
            "notes": "Full ownership with support"
        },
        {
            "week": "Month 2",
            "task": "Participate in hiring/interviewing for your team",
            "connectWith": "Your Manager / Recruiter",
            "notes": "Build your bench through networks, not recruiters"
        },
        {
            "week": "Month 2",
            "task": "Lead project retrospective",
            "connectWith": "Project Team",
            "notes": "Drive continuous improvement culture"
        },
        {
            "week": "Month 2",
            "task": "Monthly CEO touchpoint #1",
            "connectWith": "CEO",
            "notes": "Scheduled by People Ops"
        },
        {
            "week": "Month 2",
            "task": "Review utilization and take corrective action",
            "connectWith": "Finance / Your Manager",
            "notes": "Address any capacity issues proactively"
        },
        {
            "week": "Month 2",
            "task": "Collaborate on proposal/SOW with Growth",
            "connectWith": "Growth Team",
            "notes": "Ensure delivery feasibility and margins"
        },
        {
            "week": "Month 3",
            "task": "Own end-to-end delivery of active projects",
            "connectWith": "Self",
            "notes": "Demonstrate full capability independently"
        },
        {
            "week": "Month 3",
            "task": "Deliver margin improvement initiatives",
            "connectWith": "Finance",
            "notes": "Show progress toward 75/100 cost ratio"
        },
        {
            "week": "Month 3",
            "task": "Provide coaching/feedback to direct reports",
            "connectWith": "Your Team",
            "notes": "Develop your people"
        },
        {
            "week": "Month 3",
            "task": "Present regional health at leadership meeting",
            "connectWith": "Leadership Team",
            "notes": "Share wins, challenges, and plans"
        },
        {
            "week": "Month 3",
            "task": "90-day review with manager",
            "connectWith": "Your Manager",
            "notes": "Reflect on P&L performance and team health"
        }
    ],
    "growth-sales": [
        {
            "week": "Week 1",
            "task": "Complete HR onboarding and IT setup",
            "connectWith": "People Ops",
            "notes": "CRM access, email, LinkedIn Sales Navigator"
        },
        {
            "week": "Week 1",
            "task": "Review 2026 Annual Kickoff deck",
            "connectWith": "Your Manager",
            "notes": "Focus on bookings targets and pipeline coverage"
        },
        {
            "week": "Week 1",
            "task": "Meet your manager for territory/vertical assignment",
            "connectWith": "Your Manager",
            "notes": "Understand your $38M bookings contribution"
        },
        {
            "week": "Week 1",
            "task": "Review Hummingbird's 7 guiding principles",
            "connectWith": "Self",
            "notes": "Lead with opinion, be best team to win the deal"
        },
        {
            "week": "Week 1",
            "task": "Understand Microsoft partner motion",
            "connectWith": "Partner Manager",
            "notes": "Critical relationship - how we go to market"
        },
        {
            "week": "Week 1",
            "task": "Review ICP and target accounts in your territory",
            "connectWith": "Your Manager",
            "notes": "Know who we sell to and why"
        },
        {
            "week": "Week 2",
            "task": "Shadow 3-5 customer discovery calls",
            "connectWith": "Senior Seller",
            "notes": "Learn our discovery and qualification approach"
        },
        {
            "week": "Week 2",
            "task": "Review Nectarworks AI platform demo",
            "connectWith": "Technical Lead",
            "notes": "Our key differentiator - know it cold"
        },
        {
            "week": "Week 2",
            "task": "Study successful case studies and references",
            "connectWith": "Marketing / SVP",
            "notes": "Franklin Templeton model, outcome-based delivery"
        },
        {
            "week": "Week 2",
            "task": "Learn CRM process and pipeline management",
            "connectWith": "Sales Ops / Your Manager",
            "notes": "Rigor around proposals and CRM excellence"
        },
        {
            "week": "Week 2",
            "task": "Meet with SVP Customer Experience",
            "connectWith": "SVP",
            "notes": "Understand solution visioning and how you partner"
        },
        {
            "week": "Week 2",
            "task": "Review pricing models and margin targets",
            "connectWith": "Finance / Your Manager",
            "notes": "Direct vs Sapient, outcome-based pricing"
        },
        {
            "week": "Week 3",
            "task": "Participate in full sales cycle observation",
            "connectWith": "Senior Seller",
            "notes": "Discovery \u2192 Vision \u2192 Proposal \u2192 Close"
        },
        {
            "week": "Week 3",
            "task": "Build target account list for your territory",
            "connectWith": "Your Manager",
            "notes": "Right deals, not all deals"
        },
        {
            "week": "Week 4",
            "task": "Lead discovery call with support",
            "connectWith": "Your Manager shadows",
            "notes": "Start taking ownership"
        },
        {
            "week": "Week 4",
            "task": "Collaborate with Architect on solution scope",
            "connectWith": "Architect",
            "notes": "Learn to scope for feasibility and margins"
        },
        {
            "week": "Week 4",
            "task": "Present solution to prospect with SVP",
            "connectWith": "SVP / Prospect",
            "notes": "Practice outcome-based positioning"
        },
        {
            "week": "Week 4",
            "task": "Engage Microsoft partner team on opportunity",
            "connectWith": "Microsoft",
            "notes": "Leverage co-sell motion"
        },
        {
            "week": "Month 2",
            "task": "Own full sales cycle for 1-2 opportunities",
            "connectWith": "Your Manager",
            "notes": "Discovery through close with coaching"
        },
        {
            "week": "Month 2",
            "task": "Build quarterly pipeline coverage report",
            "connectWith": "Sales Ops",
            "notes": "Track toward bookings goal"
        },
        {
            "week": "Month 2",
            "task": "Collaborate on SOW/proposal with CD and Architect",
            "connectWith": "Delivery Team",
            "notes": "Ensure we can deliver what you sell"
        },
        {
            "week": "Month 2",
            "task": "Monthly CEO touchpoint #1",
            "connectWith": "CEO",
            "notes": "Scheduled by People Ops"
        },
        {
            "week": "Month 2",
            "task": "Lead customer executive briefing/demo",
            "connectWith": "Customer",
            "notes": "Demonstrate platform and thought leadership"
        },
        {
            "week": "Month 2",
            "task": "Participate in Microsoft partner review",
            "connectWith": "Partner Manager",
            "notes": "Strengthen Microsoft relationship"
        },
        {
            "week": "Month 3",
            "task": "Close first deal or advance multiple to proposal stage",
            "connectWith": "Self",
            "notes": "Demonstrate bookings contribution"
        },
        {
            "week": "Month 3",
            "task": "Lead industry-specific customer event/webinar",
            "connectWith": "Marketing",
            "notes": "Position as thought leader in your vertical"
        },
        {
            "week": "Month 3",
            "task": "Mentor junior seller or BDR",
            "connectWith": "Junior Team Member",
            "notes": "Give back to the team"
        },
        {
            "week": "Month 3",
            "task": "Present pipeline and forecast at leadership meeting",
            "connectWith": "Leadership Team",
            "notes": "Show your impact and trajectory"
        },
        {
            "week": "Month 3",
            "task": "90-day review with manager",
            "connectWith": "Your Manager",
            "notes": "Assess performance vs bookings target"
        },
        {
            "week": "Customer Experience",
            "task": "[Name]",
            "connectWith": "Solution visioning, outcome definition",
            "notes": ""
        },
        {
            "week": "Growth",
            "task": "[Name]",
            "connectWith": "Your direct manager, pipeline coaching",
            "notes": ""
        },
        {
            "week": "Regional Mgmt",
            "task": "[Name]",
            "connectWith": "Delivery feasibility, scoping, SOW collaboration",
            "notes": ""
        },
        {
            "week": "Technical",
            "task": "[Name]",
            "connectWith": "Technical validation, solution design support",
            "notes": ""
        },
        {
            "week": "Enablement",
            "task": "[Name]",
            "connectWith": "Pricing, margin targets, contract structure",
            "notes": ""
        },
        {
            "week": "Microsoft",
            "task": "[Name]",
            "connectWith": "Co-sell motion, partner-sourced deals",
            "notes": ""
        }
    ],
    "enablement": [
        {
            "week": "Week 1",
            "task": "Complete HR onboarding and IT setup",
            "connectWith": "People Ops",
            "notes": "Systems access specific to your function"
        },
        {
            "week": "Week 1",
            "task": "Review 2026 Annual Kickoff deck",
            "connectWith": "Your Manager",
            "notes": "Focus on cycle time KPI and business enablement"
        },
        {
            "week": "Week 1",
            "task": "Meet your manager for role expectations",
            "connectWith": "Your Manager",
            "notes": "Understand your functional priorities"
        },
        {
            "week": "Week 1",
            "task": "Internalize Hummingbird's 7 guiding principles",
            "connectWith": "Self",
            "notes": "Speed, simplicity, action"
        },
        {
            "week": "Week 1",
            "task": "Review current state of your functional area",
            "connectWith": "Your Manager",
            "notes": "Understand baseline and improvement areas"
        },
        {
            "week": "Week 1",
            "task": "Meet cross-functional stakeholders",
            "connectWith": "CX / Growth / Regional",
            "notes": "Understand who you're enabling"
        },
        {
            "week": "Week 2",
            "task": "Shadow current processes in your area",
            "connectWith": "Team Members",
            "notes": "Learn current state workflows"
        },
        {
            "week": "Week 2",
            "task": "Review tech stack and tools",
            "connectWith": "IT / Your Manager",
            "notes": "Dock, Gyde, CRM, finance systems, etc."
        },
        {
            "week": "Week 2",
            "task": "Understand pain points from business teams",
            "connectWith": "CDs / Growth / SVPs",
            "notes": "What's slowing them down?"
        },
        {
            "week": "Week 2",
            "task": "Review 'speed vs bureaucracy' principle",
            "connectWith": "Your Manager",
            "notes": "Balance process with agility"
        },
        {
            "week": "Week 2",
            "task": "Study successful enablement initiatives",
            "connectWith": "Senior Team Members",
            "notes": "What's worked? What hasn't?"
        },
        {
            "week": "Week 2",
            "task": "Map dependencies across functions",
            "connectWith": "Cross-functional",
            "notes": "Understand how your work impacts others"
        },
        {
            "week": "Week 3",
            "task": "Identify 1-2 quick win improvements",
            "connectWith": "Your Manager",
            "notes": "Show immediate value"
        },
        {
            "week": "Week 3",
            "task": "Participate in business review meetings",
            "connectWith": "Leadership",
            "notes": "See where your function adds value"
        },
        {
            "week": "Week 4",
            "task": "Lead process improvement initiative",
            "connectWith": "Your Manager supports",
            "notes": "Start driving change"
        },
        {
            "week": "Week 4",
            "task": "Gather feedback from business stakeholders",
            "connectWith": "CDs / Growth / SVPs",
            "notes": "How can you better enable them?"
        },
        {
            "week": "Week 4",
            "task": "Document current vs improved process",
            "connectWith": "Your Manager",
            "notes": "Show impact and ROI"
        },
        {
            "week": "Month 2",
            "task": "Own key enablement processes",
            "connectWith": "Your Manager",
            "notes": "Full ownership with support"
        },
        {
            "week": "Month 2",
            "task": "Implement process improvements",
            "connectWith": "Stakeholders",
            "notes": "Drive adoption and measure results"
        },
        {
            "week": "Month 2",
            "task": "Train business teams on new tools/processes",
            "connectWith": "Business Teams",
            "notes": "Ensure adoption and value realization"
        },
        {
            "week": "Month 2",
            "task": "Monthly CEO touchpoint #1",
            "connectWith": "CEO",
            "notes": "Scheduled by People Ops"
        },
        {
            "week": "Month 2",
            "task": "Track cycle time metrics",
            "connectWith": "Your Manager",
            "notes": "Show improvement in business velocity"
        },
        {
            "week": "Month 2",
            "task": "Support hiring or financial planning",
            "connectWith": "Relevant Function",
            "notes": "Based on your specific role"
        },
        {
            "week": "Month 3",
            "task": "Demonstrate measurable cycle time improvement",
            "connectWith": "Leadership",
            "notes": "Show impact on business velocity"
        },
        {
            "week": "Month 3",
            "task": "Present enablement roadmap",
            "connectWith": "Leadership Team",
            "notes": "What's next for your functional area"
        },
        {
            "week": "Month 3",
            "task": "Mentor or train new team members",
            "connectWith": "Junior Team",
            "notes": "Build capability in your function"
        },
        {
            "week": "Month 3",
            "task": "Monthly CEO touchpoint #2",
            "connectWith": "CEO",
            "notes": "Scheduled by People Ops"
        },
        {
            "week": "Month 3",
            "task": "Optimize processes for 210+ employee scale",
            "connectWith": "Your Manager",
            "notes": "Think ahead to future state"
        },
        {
            "week": "Month 3",
            "task": "90-day review with manager",
            "connectWith": "Your Manager",
            "notes": "Assess impact and set next goals"
        },
        {
            "week": "Enablement",
            "task": "[Name]",
            "connectWith": "Your functional leader, strategic direction",
            "notes": ""
        },
        {
            "week": "Enablement",
            "task": "[Name]",
            "connectWith": "Financial planning, commercial controls (if Finance role)",
            "notes": ""
        },
        {
            "week": "Enablement",
            "task": "[Name]",
            "connectWith": "Talent infrastructure, development (if HR role)",
            "notes": ""
        },
        {
            "week": "Enablement",
            "task": "[Name]",
            "connectWith": "Tools, data, systems (if IT/Ops role)",
            "notes": ""
        },
        {
            "week": "All Functions",
            "task": "[Names]",
            "connectWith": "The people you're enabling - their needs drive your work",
            "notes": ""
        },
        {
            "week": "Leadership",
            "task": "[Name]",
            "connectWith": "Strategic context, company priorities",
            "notes": ""
        }
    ]
};

// Use localStorage instead of Claude storage API
const storage = {
    async get(key) {
        const value = localStorage.getItem(key);
        return value ? { value } : null;
    },
    async set(key, value) {
        localStorage.setItem(key, value);
        return { key, value };
    },
    async delete(key) {
        localStorage.removeItem(key);
        return { key, deleted: true };
    },
    async list(prefix) {
        const keys = Object.keys(localStorage).filter(k => k.startsWith(prefix));
        return { keys };
    }
};
let currentUser = null;
let isManager = false;

// Login credentials
const CREDENTIALS = {
    'newhire': { password: 'welcome2024', role: 'employee', name: 'New Hire' },
    'manager': { password: '{(%uK7!A[.o47i./', role: 'manager', name: 'Manager' }
};

async function init() {
    try {
        const userData = await storage.get('current_user');
        if (userData) {
            currentUser = JSON.parse(userData.value);
            isManager = currentUser.role === 'manager';
            showApp();
            if (!isManager) {
                await loadUserProgress();
            } else {
                await loadManagerDashboard();
            }
        }
    } catch (e) {}
}

async function login(event) {
    if (event) event.preventDefault();
    const username = document.getElementById('username').value.trim().toLowerCase();
    const password = document.getElementById('password').value;
    const errorEl = document.getElementById('loginError');
    
    if (!username || !password) {
        errorEl.textContent = 'Please enter both username and password';
        errorEl.classList.remove('hidden');
        return;
    }
    
    // Check stored manager password first
    if (username === 'manager') {
        try {
            const storedPassword = await storage.get('manager_password');
            if (storedPassword && password === storedPassword.value) {
                currentUser = { username, role: 'manager', name: 'Manager' };
                isManager = true;
                await storage.set('current_user', JSON.stringify(currentUser));
                showApp();
                await loadManagerDashboard();
                return;
            }
        } catch (e) {}
    }
    
    // Check default credentials
    if (CREDENTIALS[username] && CREDENTIALS[username].password === password) {
        currentUser = { username, role: CREDENTIALS[username].role, name: CREDENTIALS[username].name };
        isManager = currentUser.role === 'manager';
        await storage.set('current_user', JSON.stringify(currentUser));
        showApp();
        if (!isManager) {
            await loadUserProgress();
        } else {
            await loadManagerDashboard();
        }
    } else {
        errorEl.textContent = 'Invalid username or password';
        errorEl.classList.remove('hidden');
    }
}

// Allow Enter key to submit
document.addEventListener('DOMContentLoaded', function() {
    const passwordInput = document.getElementById('password');
    if (passwordInput) {
        passwordInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') login();
        });
    }
});

function showApp() {
    document.getElementById('authScreen').classList.add('hidden');
    document.getElementById('appContainer').classList.remove('hidden');
    document.getElementById('userEmail').textContent = currentUser.name;
    if (isManager) document.getElementById('managerTab').classList.remove('hidden');
    renderRoleChecklists();
}

async function logout() {
    await storage.delete('current_user');
    currentUser = null;
    isManager = false;
    document.getElementById('authScreen').classList.remove('hidden');
    document.getElementById('appContainer').classList.add('hidden');
    document.getElementById('managerTab').classList.add('hidden');
    document.getElementById('loginError').classList.add('hidden');
    document.getElementById('username').value = '';
    document.getElementById('password').value = '';
}

function switchTab(tabName, event) {
    document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
    event.target.classList.add('active');
    document.getElementById(tabName).classList.add('active');
    if (tabName === 'manager') loadManagerDashboard();
}

function renderRoleChecklists() {
    Object.keys(ROLES_DATA).forEach(role => {
        const container = document.getElementById(role);
        if (!container) return;
        const tasks = ROLES_DATA[role];
        const weekGroups = {};
        tasks.forEach(task => {
            if (!weekGroups[task.week]) weekGroups[task.week] = [];
            weekGroups[task.week].push(task);
        });
        
        let html = `
            <div class="progress-stats">
                <div class="stat-card">
                    <div class="stat-value" id="${role}-completed">0</div>
                    <div class="stat-label">Tasks Completed</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="${role}-progress" style="width: 0%"></div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="${role}-remaining">${tasks.length}</div>
                    <div class="stat-label">Tasks Remaining</div>
                </div>
            </div>
        `;
        
        Object.keys(weekGroups).forEach(week => {
            html += `<div class="week-section"><div class="week-header">${week}</div><div class="task-list">`;
            weekGroups[week].forEach((task, index) => {
                const taskId = `${role}-${week}-${index}`.replace(/[^a-zA-Z0-9-]/g, '-');
                html += `
                    <div class="task-item" id="task-${taskId}">
                        <div class="checkbox-wrapper">
                            <input type="checkbox" class="checkbox" id="check-${taskId}" 
                                   onchange="toggleTask('${role}', '${taskId}')" ${isManager ? 'disabled' : ''}>
                        </div>
                        <div class="task-content">
                            <div class="task-title">${task.task}</div>
                            <div class="task-meta">
                                ${task.connectWith ? `<div class="meta-item"><span class="meta-label">Connect With:</span> ${task.connectWith}</div>` : ''}
                                ${task.notes ? `<div class="meta-item"><span class="meta-label">Notes:</span> ${task.notes}</div>` : ''}
                            </div>
                        </div>
                    </div>
                `;
            });
            html += `</div></div>`;
        });
        container.innerHTML = html;
    });
}

async function toggleTask(role, taskId) {
    if (isManager) return;
    const checkbox = document.getElementById(`check-${taskId}`);
    const taskItem = document.getElementById(`task-${taskId}`);
    const isCompleted = checkbox.checked;
    
    if (isCompleted) taskItem.classList.add('task-completed');
    else taskItem.classList.remove('task-completed');
    
    const storageKey = `progress-${currentUser.username}-${role}`;
    try {
        let progress = {};
        try {
            const data = await storage.get(storageKey);
            if (data) progress = JSON.parse(data.value);
        } catch (e) {}
        progress[taskId] = isCompleted;
        await storage.set(storageKey, JSON.stringify(progress));
        updateRoleStats(role);
    } catch (e) { console.error('Error saving:', e); }
}

async function loadUserProgress() {
    for (const role of Object.keys(ROLES_DATA)) {
        const storageKey = `progress-${currentUser.username}-${role}`;
        try {
            const data = await storage.get(storageKey);
            if (data) {
                const progress = JSON.parse(data.value);
                Object.keys(progress).forEach(taskId => {
                    const checkbox = document.getElementById(`check-${taskId}`);
                    const taskItem = document.getElementById(`task-${taskId}`);
                    if (checkbox && progress[taskId]) {
                        checkbox.checked = true;
                        if (taskItem) taskItem.classList.add('task-completed');
                    }
                });
            }
        } catch (e) {}
        updateRoleStats(role);
    }
}

function updateRoleStats(role) {
    const checkboxes = document.querySelectorAll(`#${role} .checkbox`);
    const completed = Array.from(checkboxes).filter(cb => cb.checked).length;
    const total = checkboxes.length;
    const percentage = total > 0 ? (completed / total * 100).toFixed(0) : 0;
    
    const completedEl = document.getElementById(`${role}-completed`);
    const remainingEl = document.getElementById(`${role}-remaining`);
    const progressEl = document.getElementById(`${role}-progress`);
    
    if (completedEl) completedEl.textContent = `${completed}/${total}`;
    if (remainingEl) remainingEl.textContent = total - completed;
    if (progressEl) progressEl.style.width = `${percentage}%`;
}

async function loadManagerDashboard() {
    const overviewEl = document.getElementById('managerOverview');
    const dashboardEl = document.getElementById('managerDashboard');
    let html = '';
    let overviewHtml = '';
    
    try {
        const allKeys = await storage.list('progress-');
        const users = new Set();
        if (allKeys && allKeys.keys) {
            allKeys.keys.forEach(key => {
                const parts = key.split('-');
                if (parts.length >= 2 && parts[1] !== 'manager') users.add(parts[1]);
            });
        }
        
        if (users.size === 0) {
            html = '<p style="color: var(--text-light); text-align: center; padding: 40px;">No new hires have started onboarding yet. When new hires log in and start checking off tasks, they will appear here.</p>';
            overviewHtml = '';
        } else {
            // Calculate overview stats
            let totalCompleted = 0;
            let totalTasks = 0;
            let activeUsers = 0;
            
            for (const username of users) {
                let userCompleted = 0;
                for (const role of Object.keys(ROLES_DATA)) {
                    const storageKey = `progress-${username}-${role}`;
                    try {
                        const data = await storage.get(storageKey);
                        if (data) {
                            const progress = JSON.parse(data.value);
                            userCompleted += Object.values(progress).filter(v => v).length;
                        }
                    } catch (e) {}
                    totalTasks += ROLES_DATA[role].length;
                }
                totalCompleted += userCompleted;
                if (userCompleted > 0) activeUsers++;
            }
            
            const avgCompletion = users.size > 0 ? Math.round(totalCompleted / users.size) : 0;
            const totalTasksAvailable = Object.values(ROLES_DATA).reduce((sum, tasks) => sum + tasks.length, 0);
            
            overviewHtml = `
                <div class="overview-card">
                    <div class="overview-number">${users.size}</div>
                    <div class="overview-label">Total New Hires</div>
                </div>
                <div class="overview-card">
                    <div class="overview-number">${activeUsers}</div>
                    <div class="overview-label">Active Users</div>
                </div>
                <div class="overview-card">
                    <div class="overview-number">${totalCompleted}</div>
                    <div class="overview-label">Tasks Completed</div>
                </div>
                <div class="overview-card">
                    <div class="overview-number">${avgCompletion}</div>
                    <div class="overview-label">Avg Tasks per User</div>
                </div>
            `;
            
            for (const username of users) html += await renderEmployeeCard(username);
        }
    } catch (e) {
        html = '<p style="color: var(--text-light);">Unable to load employee data.</p>';
    }
    
    overviewEl.innerHTML = overviewHtml;
    dashboardEl.innerHTML = html;
}

async function renderEmployeeCard(username) {
    let totalCompleted = 0;
    let totalTasks = 0;
    const roleProgress = {};
    
    for (const role of Object.keys(ROLES_DATA)) {
        const storageKey = `progress-${username}-${role}`;
        let roleCompleted = 0;
        try {
            const data = await storage.get(storageKey);
            if (data) {
                const progress = JSON.parse(data.value);
                roleCompleted = Object.values(progress).filter(v => v).length;
                totalCompleted += roleCompleted;
            }
        } catch (e) {}
        const roleTotal = ROLES_DATA[role].length;
        totalTasks += roleTotal;
        roleProgress[role] = { completed: roleCompleted, total: roleTotal };
    }
    
    const percentage = totalTasks > 0 ? (totalCompleted / totalTasks * 100).toFixed(0) : 0;
    
    // Determine status
    let status = 'just-started';
    let statusText = 'Just Started';
    if (percentage >= 75) {
        status = 'on-track';
        statusText = 'On Track';
    } else if (percentage >= 25) {
        status = 'on-track';
        statusText = 'In Progress';
    } else if (percentage > 0) {
        status = 'just-started';
        statusText = 'Getting Started';
    }
    
    // Format role names
    const roleNames = {
        'architect': 'Architect',
        'consultant': 'Consultant',
        'consulting-director': 'Consulting Director',
        'growth-sales': 'Growth/Sales',
        'enablement': 'Enablement'
    };
    
    let roleBreakdownHtml = '';
    Object.keys(roleProgress).forEach(role => {
        const rp = roleProgress[role];
        const rolePercentage = rp.total > 0 ? (rp.completed / rp.total * 100).toFixed(0) : 0;
        roleBreakdownHtml += `
            <div class="role-stat">
                <div class="role-stat-name">${roleNames[role]}</div>
                <div class="role-stat-progress">${rp.completed}/${rp.total}</div>
                <div class="role-stat-label">${rolePercentage}% complete</div>
            </div>
        `;
    });
    
    return `
        <div class="employee-detail-card">
            <div class="employee-detail-header">
                <div class="employee-info">
                    <h3>${username}</h3>
                    <span class="employee-status status-${status}">${statusText}</span>
                </div>
                <div style="text-align: right;">
                    <div style="font-size: 32px; font-weight: 700; color: var(--primary);">${percentage}%</div>
                    <div style="font-size: 14px; color: var(--text-light);">Overall Progress</div>
                </div>
            </div>
            
            <div style="margin-bottom: 20px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                    <span style="font-size: 14px; font-weight: 600; color: var(--text);">Total Progress</span>
                    <span style="font-size: 14px; color: var(--text-light);">${totalCompleted} of ${totalTasks} tasks</span>
                </div>
                <div class="progress-bar" style="height: 12px;">
                    <div class="progress-fill" style="width: ${percentage}%"></div>
                </div>
            </div>
            
            <div style="margin-bottom: 12px; font-size: 14px; font-weight: 600; color: var(--text);">Progress by Role</div>
            <div class="role-breakdown">
                ${roleBreakdownHtml}
            </div>
        </div>
    `;
}

async function changeManagerPassword() {
    const newPassword = document.getElementById('newPassword').value;
    const confirmPassword = document.getElementById('confirmPassword').value;
    const errorEl = document.getElementById('passwordChangeError');
    const successEl = document.getElementById('passwordChangeSuccess');
    
    errorEl.classList.add('hidden');
    successEl.classList.add('hidden');
    
    if (!newPassword || newPassword.length < 8) {
        errorEl.textContent = 'Password must be at least 8 characters';
        errorEl.classList.remove('hidden');
        return;
    }
    
    if (newPassword !== confirmPassword) {
        errorEl.textContent = 'Passwords do not match';
        errorEl.classList.remove('hidden');
        return;
    }
    
    try {
        await storage.set('manager_password', newPassword);
        successEl.textContent = 'Password updated successfully!';
        successEl.classList.remove('hidden');
        document.getElementById('newPassword').value = '';
        document.getElementById('confirmPassword').value = '';
    } catch (e) {
        errorEl.textContent = 'Failed to update password';
        errorEl.classList.remove('hidden');
    }
}


function togglePasswordSection() {
    const section = document.getElementById('passwordSection');
    section.classList.toggle('hidden');
}

init();
    </script>
</body>
</html>
